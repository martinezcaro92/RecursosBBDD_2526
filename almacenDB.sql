-- =========================
-- 1) CREACIÓN DE LA BASE DE DATOS
-- =========================
DROP DATABASE IF EXISTS almacenDB;
CREATE DATABASE almacenDB CHARACTER SET utf8mb4;
USE almacenDB;

-- =========================
-- 2) CREACIÓN DE LAS TABLAS
-- =========================

-- PROVEEDORES
CREATE TABLE PROVEEDORES (
    `P#` VARCHAR(10) PRIMARY KEY,
    PNOMBRE VARCHAR(50) NOT NULL,
    CATEGORIA INT NOT NULL,
    CIUDAD VARCHAR(50) NOT NULL
);

-- COMPONENTES
CREATE TABLE COMPONENTES (
    `C#` VARCHAR(10) PRIMARY KEY,
    CNOMBRE VARCHAR(50) NOT NULL,
    COLOR VARCHAR(20),
    PESO INT,
    CIUDAD VARCHAR(50)
);

-- ARTICULOS
CREATE TABLE ARTICULOS (
    `T#` VARCHAR(10) PRIMARY KEY,
    TNOMBRE VARCHAR(50) NOT NULL,
    CIUDAD VARCHAR(50)
);

-- ENVIOS
CREATE TABLE ENVIOS (
    `P#` VARCHAR(10),
    `C#` VARCHAR(10),
    `T#` VARCHAR(10),
    CANTIDAD INT,
    PRIMARY KEY (`P#`, `C#`, `T#`),
    FOREIGN KEY (`P#`) REFERENCES PROVEEDORES(`P#`),
    FOREIGN KEY (`C#`) REFERENCES COMPONENTES(`C#`),
    FOREIGN KEY (`T#`) REFERENCES ARTICULOS(`T#`)
);

-- =========================
-- 3) INSERCIÓN DE LOS REGISTROS
-- =========================

-- PROVEEDORES
INSERT INTO PROVEEDORES (`P#`, PNOMBRE, CATEGORIA, CIUDAD) VALUES
 ('P1','CARLOS',20,'SEVILLA'),
 ('P2','JUAN',10,'MADRID'),
 ('P3','JOSE',30,'SEVILLA'),
 ('P4','INMA',20,'SEVILLA'),
 ('P5','EVA',30,'CACERES');

-- COMPONENTES
INSERT INTO COMPONENTES (`C#`, CNOMBRE, COLOR, PESO, CIUDAD) VALUES
 ('C1','X3A','ROJO',12,'SEVILLA'),
 ('C2','B85','VERDE',17,'MADRID'),
 ('C3','C4B','AZUL',17,'MALAGA'),
 ('C4','C4B','ROJO',14,'SEVILLA'),
 ('C5','VT8','AZUL',12,'MADRID'),
 ('C6','C30','ROJO',19,'SEVILLA');

-- ARTICULOS
INSERT INTO ARTICULOS (`T#`, TNOMBRE, CIUDAD) VALUES
 ('T1','CLASIFICADORA','MADRID'),
 ('T2','PERFORADORA','MALAGA'),
 ('T3','LECTORA','CACERES'),
 ('T4','CONSOLA','CACERES'),
 ('T5','MEZCLADORA','SEVILLA'),
 ('T6','TERMINAL','BARCELONA'),
 ('T7','CINTA','SEVILLA');

-- ENVIOS
INSERT INTO ENVIOS (`P#`, `C#`, `T#`, CANTIDAD) VALUES
 ('P1','C1','T1',200),
 ('P1','C1','T4',700),
 
 ('P2','C3','T1',400),
 ('P2','C3','T2',200),
 ('P2','C3','T3',200),
 ('P2','C3','T4',500),
 ('P2','C3','T5',600),
 ('P2','C3','T6',400),
 ('P2','C3','T7',800),
 ('P2','C5','T2',100),

 ('P3','C1','T1',200),
 ('P3','C2','T2',500),

 ('P4','C3','T2',300),
 ('P4','C6','T7',200),

 ('P5','C2','T2',200),
 ('P5','C2','T4',100),
 ('P5','C3','T1',100),
 ('P5','C3','T4',800),
 ('P5','C5','T5',400),
 ('P5','C6','T4',500);
